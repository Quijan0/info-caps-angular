<div class="subscription-container">
  <div class="container">
    <div class="subscription-header">
      <h1>Suscr√≠bete para Acceder a Todos los Cursos</h1>
      <p>Elige tu plan y obt√©n acceso completo a nuestra plataforma de aprendizaje</p>
    </div>

    <div class="subscription-content">
      <!-- Plans Section -->
      <div class="plans-section">
        <h2>Planes Disponibles</h2>
        <div class="plans-grid">
          <div class="plan-card" 
               *ngFor="let plan of plans"
               [class.selected]="plan.id === selectedPlan.id"
               (click)="selectPlan(plan)">
            <div class="plan-header">
              <h3>{{ plan.name }}</h3>
              <div class="plan-price">
                <span class="price">${{ plan.price }}</span>
                <span class="period">/ {{ plan.period }}</span>
                <div class="original-price" *ngIf="plan.originalPrice">
                  Antes: ${{ plan.originalPrice }}
                </div>
              </div>
            </div>
            
            <div class="plan-features">
              <ul>
                <li *ngFor="let feature of plan.features">
                  ‚úì {{ feature }}
                </li>
              </ul>
            </div>
            
            <div class="plan-selector" *ngIf="plan.id === selectedPlan.id">
              <span class="selected-indicator">‚úì Seleccionado</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Payment Form -->
      <div class="payment-section">
        <h2>Informaci√≥n de Pago</h2>
        <div class="payment-form">
          <form [formGroup]="subscriptionForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
              <label for="cardholderName">Nombre del Titular</label>
              <input
                type="text"
                id="cardholderName"
                formControlName="cardholderName"
                placeholder="Juan P√©rez"
                [class.error]="subscriptionForm.get('cardholderName')?.invalid && subscriptionForm.get('cardholderName')?.touched"
              >
              <div class="error-message" *ngIf="getFieldError('cardholderName')">
                {{ getFieldError('cardholderName') }}
              </div>
            </div>

            <div class="form-group">
              <label for="cardNumber">N√∫mero de Tarjeta</label>
              <input
                type="text"
                id="cardNumber"
                placeholder="1234 5678 9012 3456"
                maxlength="19"
                (input)="formatCardNumber($event)"
                [class.error]="subscriptionForm.get('cardNumber')?.invalid && subscriptionForm.get('cardNumber')?.touched"
              >
              <div class="error-message" *ngIf="getFieldError('cardNumber')">
                {{ getFieldError('cardNumber') }}
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="expiryDate">Fecha de Vencimiento</label>
                <input
                  type="text"
                  id="expiryDate"
                  placeholder="MM/YY"
                  maxlength="5"
                  (input)="formatExpiryDate($event)"
                  [class.error]="subscriptionForm.get('expiryDate')?.invalid && subscriptionForm.get('expiryDate')?.touched"
                >
                <div class="error-message" *ngIf="getFieldError('expiryDate')">
                  {{ getFieldError('expiryDate') }}
                </div>
              </div>

              <div class="form-group">
                <label for="cvv">CVV</label>
                <input
                  type="text"
                  id="cvv"
                  formControlName="cvv"
                  placeholder="123"
                  maxlength="4"
                  [class.error]="subscriptionForm.get('cvv')?.invalid && subscriptionForm.get('cvv')?.touched"
                >
                <div class="error-message" *ngIf="getFieldError('cvv')">
                  {{ getFieldError('cvv') }}
                </div>
              </div>
            </div>

            <div class="order-summary">
              <div class="summary-item">
                <span>Plan seleccionado:</span>
                <span>{{ selectedPlan.name }}</span>
              </div>
              <div class="summary-item total">
                <span>Total a pagar:</span>
                <span>${{ selectedPlan.price }}</span>
              </div>
            </div>

            <div class="error-message" *ngIf="errorMessage">
              {{ errorMessage }}
            </div>

            <button type="submit" class="btn btn-primary btn-large" [disabled]="loading">
              <span *ngIf="loading">Procesando...</span>
              <span *ngIf="!loading">Suscribirse Ahora</span>
            </button>
          </form>

          <div class="security-notice">
            <div class="security-icons">üîí üõ°Ô∏è</div>
            <p>Tu informaci√≥n est√° segura y protegida con encriptaci√≥n SSL</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>